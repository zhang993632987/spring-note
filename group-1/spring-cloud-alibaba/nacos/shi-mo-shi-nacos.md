# 什么是 Nacos？

Nacos /nɑ:kəʊs/ 是 Dynamic Naming and Configuration Service 的首字母简称，一个更易于构建云原生应用的动态**服务发现**、**配置管理**和**服务管理**平台。

Nacos 支持几乎所有主流类型的“服务”的发现、配置和管理：

* **Kubernetes Service**
* **gRPC & Dubbo RPC Service**
* **Spring Cloud RESTful Service**

## 关键特性

Nacos 的关键特性包括：

* **服务发现和服务健康监测**
  * Nacos 支持基于 DNS 和基于 RPC 的服务发现。服务提供者使用注册 Service 后，服务消费者可以使用 DNS TODO 或 HTTP\&API 查找和发现服务。
  * Nacos 提供对服务的实时的健康检查，阻止向不健康的主机或服务实例发送请求。
    * Nacos 支持传输层 (PING 或 TCP)和应用层 (如 HTTP、MySQL、用户自定义）的健康检查。&#x20;
    * 对于复杂的云环境和网络拓扑环境中（如 VPC、边缘网络等）服务的健康检查，Nacos 提供了 agent 上报模式和服务端主动检测 2 种健康检查模式。
    * Nacos 还提供了统一的健康检查仪表盘，帮助问哦们根据健康状态管理服务的可用性及流量。
* **动态配置服务**
  * 动态配置服务可以让我们以中心化、外部化和动态化的方式管理所有环境的应用配置和服务配置。
  * Nacos 提供了一个简洁易用的 UI 帮助我们管理所有的服务和应用的配置。
  * Nacos 还提供包括配置版本跟踪、金丝雀发布、一键回滚配置以及客户端配置更新状态跟踪在内的一系列开箱即用的配置管理特性，帮助我们更安全地在生产环境中管理配置变更和降低配置变更带来的风险。
* **动态 DNS 服务**
  * 动态 DNS 服务支持权重路由，让我们更容易地实现中间层负载均衡、更灵活的路由策略、流量控制以及数据中心内网的简单DNS解析服务。
  * 动态DNS服务还能让我们更容易地实现以 DNS 协议为基础的服务发现，以帮助我们消除耦合到厂商私有服务发现 API 上的风险。
  * Nacos 提供了一些简单的 DNS APIs TODO 帮助我们管理服务的关联域名和可用的 IP:PORT 列表。
* **服务及其元数据管理**
  * Nacos 能让我们从微服务平台建设的视角管理数据中心的所有服务及元数据，包括管理服务的描述、生命周期、服务的静态依赖分析、服务的健康状态、服务的流量管理、路由及安全策略、服务的 SLA 以及最首要的 metrics 统计数据。

## Nacos 概念

### 命名空间

用于进行租户粒度的配置隔离。不同的命名空间下，可以存在相同的 Group 或 Data ID 的配置。

**Namespace 的常用场景之一是不同环境的配置的区分隔离，例如开发测试环境和生产环境的资源（如配置、服务）隔离等。**

### 配置集与配置项

配置项指的是一个具体的可配置的参数与其值域，通常以 param-key=param-value 的形式存在。

**一组相关或者不相关的配置项的集合称为配置集。**在系统中，**一个配置文件通常就是一个配置集**，包含了系统各个方面的配置。

### 配置集 ID

Nacos 中的某个配置集的 ID。配置集 ID 是组织划分配置的维度之一。Data ID 通常用于组织划分系统的配置集。

**一个系统或者应用可以包含多个配置集，每个配置集都可以被一个有意义的名称标识。Data ID 通常采用类 Java 包（如 com.taobao.tc.refund.log.level）的命名规则保证全局唯一性。**此命名规则非强制。

### 配置分组

Nacos 中的一组配置集，是组织配置的维度之一。**通过一个有意义的字符串（如 Buy 或 Trade ）对配置集进行分组，从而区分 Data ID 相同的配置集。**

**当我们在 Nacos 上创建一个配置集时，如果未填写配置分组的名称，则配置分组的名称默认采用 DEFAULT\_GROUP。**

### 配置快照

**Nacos 的客户端 SDK 会在本地生成配置的快照。**

当客户端无法连接到 Nacos Server 时，可以使用配置快照提升系统的整体容灾能力。配置快照类似于 Git 中的本地 commit，也类似于缓存，会在适当的时机更新，但是并**没有缓存过期（expiration）的概念。**
