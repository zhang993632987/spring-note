# 引入 Spring Cloud Stream

Spring Cloud Stream 项目是一个基于注解的框架，它使我们能够在 Spring 应用程序中轻松构建消息发布者和消费者。&#x20;

Spring Cloud Stream 还允许我们将所使用的消息平台的实现细节抽象出来。我们可以使用多个消息平台，包括 Apache Kafka 项目和 RabbitMQ，而**应用程序代码中不涉及特定消息平台的底层实现细节**。**在应用程序中，通过使用平台中立的 Spring 接口来实现消息的发布和消费**。**这样的抽象有助于提高代码的可维护性和灵活性，因为应用程序可以更轻松地适应不同的消息平台，而无需大规模修改代码。**

<figure><img src="../../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

在 Spring Cloud 中，发布和消费消息涉及到四个组件：**Source**、**Channel**、**Binder**、**Sink**。&#x20;

* 当服务准备发布消息时，它将使用一个 **source** 来发布消息。
  * **Source 是一个带有 Spring 注解的接口，它接受一个普通的 Java 对象（POJO），该对象表示要发布的消息。**
  * **Source 接受消息，对其进行序列化（默认序列化为 JSON），然后将消息发布到一个通道（Channel）**。&#x20;
* **通道是对队列的抽象**，用于在消息由消息生产者发布或消息消费者消费后保存消息。换句话说，我们**可以将通道描述为发送和接收消息的队列。**
  * **通道名称**始终与目标队列名称相关联，但该队列名称从不直接暴露给代码。
  * 相反，**通道名称在代码中使用，这意味着我们可以通过更改应用程序的配置而不是更改应用程序代码来切换通道读取或写入的队列**。
* **Binder** 是 Spring Cloud Stream 框架的一部分，它**是用于与特定消息平台进行通信的 Spring 代码**。**Binder 提供了一个抽象层，使得我们能够更容易地与不同的消息平台进行交互，而不用担心底层的实现细节。**
* 在 Spring Cloud Stream 中，**当服务从队列接收消息时，它通过 Sink 来完成**。**Sink 会监听一个通道，接收传入的消息并将其反序列化为一个 POJO 对象**。接着，该消息可以由 Spring 服务的业务逻辑进行处理。简而言之，**Sink 提供了接收和处理消息的机制，使得服务能够有效地处理从队列中接收到的消息。**
